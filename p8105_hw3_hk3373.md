P8105 Homework 3
================
Hyun Kim (hk3373)
2024-10-11

# Problem 1

## Load NY NOAA data:

``` r
library(p8105.datasets)
data("ny_noaa")
str(ny_noaa)
```

    ## tibble [2,595,176 × 7] (S3: tbl_df/tbl/data.frame)
    ##  $ id  : chr [1:2595176] "US1NYAB0001" "US1NYAB0001" "US1NYAB0001" "US1NYAB0001" ...
    ##  $ date: Date[1:2595176], format: "2007-11-01" "2007-11-02" ...
    ##  $ prcp: int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ snow: int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ snwd: int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ tmax: chr [1:2595176] NA NA NA NA ...
    ##  $ tmin: chr [1:2595176] NA NA NA NA ...
    ##  - attr(*, "spec")=
    ##   .. cols(
    ##   ..   id = col_character(),
    ##   ..   date = col_date(format = ""),
    ##   ..   prcp = col_integer(),
    ##   ..   snow = col_integer(),
    ##   ..   snwd = col_integer(),
    ##   ..   tmax = col_character(),
    ##   ..   tmin = col_character()
    ##   .. )

The dataset has 2595176 rows and 7 columns, including id, tmax and tmin
as character variables, precipitation, snow as integer variables,and
date which is a date variable. There is a total of 3387623 NA values in
the dataset. Therefore, this could be an issue in data analysis since
there is a significant number of missing data.

## Tidy NY NOAA:

``` r
ny_noaa = ny_noaa |>
  drop_na() |>
  mutate(
    prcp = prcp / 10,
    tmax = as.integer(tmax) / 10,
    tmin = as.integer(tmin) / 10
  ) |>
  separate(date, 
           into = c("year", "month", "day"), 
           sep = "-",
           remove = FALSE) 
```

In tidying the dataset, the values of precipitation and temperature were
divided by 10 since they were in tenths of mm and degrees Celsius
respectively.

### For snowfall, what are the most commonly observed values? Why?

``` r
ny_noaa |>
  group_by(snow) |>
  summarize(count = n()) |>
  arrange(desc(count)) |>
  slice(1)
```

    ## # A tibble: 1 × 2
    ##    snow   count
    ##   <int>   <int>
    ## 1     0 1112758

For snowfall, the most commonly observed value is 0 because it only
snows in winter, but the dataset includes data from the other three
seasons when it most likely doesn’t snow.

## Average max temperature in January and July:

``` r
ny_noaa |>
  filter(month %in% c("01","07")) |>
  mutate(
    month = recode(month, "01" = "January"),
    month = recode(month, "07" = "July")
  ) |>
  group_by(id, year, month) |>
  summarize(average_tmax = round(mean(tmax), 2)) |>
  ggplot(aes(x = year, y = average_tmax, color = month)) +
  geom_point() +
  facet_grid(~month) +
  theme(axis.text.x = element_text(angle = 90)) +
  ggtitle("Average Max Temperature in January and July")
```

    ## `summarise()` has grouped output by 'id', 'year'. You can override using the
    ## `.groups` argument.

![](p8105_hw3_hk3373_files/figure-gfm/avg_tmax_jan_july-1.png)<!-- -->

### Is there any observable / interpretable structure? Any outliers?

The average max temperature is noticeably higher in July compared to
January obviously because it’s summer during July and winter during
January. Data for July 1988 has an extreme outlier. Data for January has
noticeable outliers for several years; the most extreme outliers are
shown in 1982 and 1996.

## tmax vs tmin and snowfall distribution by year:

``` r
tmax_vs_tmin = 
  ny_noaa |>
  ggplot(aes(x = tmax, y = tmin)) + 
  geom_hex() +
  ggtitle("tmax vs tmin")

snowfall_dist = 
  ny_noaa |>
  filter(snow > 0, snow < 100) |>
  ggplot(aes(x = snow, y = year)) + 
  geom_density_ridges(scale = 1.5) +
  ggtitle("Snowfall Distribution by Year")

tmax_vs_tmin + snowfall_dist
```

    ## Picking joint bandwidth of 4.24

![](p8105_hw3_hk3373_files/figure-gfm/tmax_tmin_snowfall-1.png)<!-- -->

According to the figure above, the values of tmax are concentrated
around -5 to 30 degrees Celsius, while the values of tmin are
concentrated around -20 to 20 degrees. The distribution of snowfall for
all years are right skewed because it only snows during winter and it’s
subsequently more common for data in the dataset to have lower values of
snowfall overall.
